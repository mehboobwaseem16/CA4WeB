{"ast":null,"code":"import _slicedToArray from\"/workspace/working-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// Author:Waseem Mehboob\n// ID: 18072\nimport React,{useEffect,useState}from'react';import{useDispatch}from'react-redux';import{getCartItems,removeCartItem,onSuccessBuy}from'../../../_actions/user_actions';import UserCardBlock from'./Sections/UserCardBlock';import{Result,Empty}from'antd';import Axios from'axios';import Paypal from'../../utils/Paypal';function CartPage(props){var dispatch=useDispatch();var _useState=useState(0),_useState2=_slicedToArray(_useState,2),Total=_useState2[0],setTotal=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),ShowTotal=_useState4[0],setShowTotal=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),ShowSuccess=_useState6[0],setShowSuccess=_useState6[1];useEffect(function(){var cartItems=[];if(props.user.userData&&props.user.userData.cart){if(props.user.userData.cart.length>0){props.user.userData.cart.forEach(function(item){cartItems.push(item.id);});dispatch(getCartItems(cartItems,props.user.userData.cart)).then(function(response){if(response.payload.length>0){calculateTotal(response.payload);}});}}},[props.user.userData]);var calculateTotal=function calculateTotal(cartDetail){var total=0;cartDetail.map(function(item){total+=parseInt(item.price,10)*item.quantity;});setTotal(total);setShowTotal(true);};var removeFromCart=function removeFromCart(productId){dispatch(removeCartItem(productId)).then(function(response){if(response.payload.cartDetail.length<=0){setShowTotal(false);}else{calculateTotal(response.payload.cartDetail);}});};var transactionSuccess=function transactionSuccess(data){dispatch(onSuccessBuy({cartDetail:props.user.cartDetail,paymentData:data})).then(function(response){if(response.payload.success){setShowSuccess(true);setShowTotal(false);}});};var transactionError=function transactionError(){console.log('Paypal error');};var transactionCanceled=function transactionCanceled(){console.log('Transaction canceled');};return/*#__PURE__*/React.createElement(\"div\",{style:{width:'85%',margin:'3rem auto'}},/*#__PURE__*/React.createElement(\"h1\",null,\"My Cart\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(UserCardBlock,{products:props.user.cartDetail,removeItem:removeFromCart}),ShowTotal?/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:'3rem'}},/*#__PURE__*/React.createElement(\"h2\",null,\"Total amount: $\",Total,\" \")):ShowSuccess?/*#__PURE__*/React.createElement(Result,{status:\"success\",title:\"Successfully Purchased Items\"}):/*#__PURE__*/React.createElement(\"div\",{style:{width:'100%',display:'flex',flexDirection:'column',justifyContent:'center'}},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Empty,{description:false}),/*#__PURE__*/React.createElement(\"p\",null,\"No Items In the Cart\"))),ShowTotal&&/*#__PURE__*/React.createElement(Paypal,{toPay:Total,onSuccess:transactionSuccess,transactionError:transactionError,transactionCanceled:transactionCanceled}));}export default CartPage;","map":{"version":3,"sources":["/workspace/working-react/client/src/components/views/CartPage/CartPage.js"],"names":["React","useEffect","useState","useDispatch","getCartItems","removeCartItem","onSuccessBuy","UserCardBlock","Result","Empty","Axios","Paypal","CartPage","props","dispatch","Total","setTotal","ShowTotal","setShowTotal","ShowSuccess","setShowSuccess","cartItems","user","userData","cart","length","forEach","item","push","id","then","response","payload","calculateTotal","cartDetail","total","map","parseInt","price","quantity","removeFromCart","productId","transactionSuccess","data","paymentData","success","transactionError","console","log","transactionCanceled","width","margin","marginTop","display","flexDirection","justifyContent"],"mappings":"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","sourcesContent":["// Author:Waseem Mehboob\n// ID: 18072\nimport React, { useEffect, useState } from 'react'\nimport { useDispatch } from 'react-redux';\nimport {\n    getCartItems,\n    removeCartItem,\n    onSuccessBuy\n} from '../../../_actions/user_actions';\nimport UserCardBlock from './Sections/UserCardBlock';\nimport { Result, Empty } from 'antd';\nimport Axios from 'axios';\nimport Paypal from '../../utils/Paypal';\nfunction CartPage(props) {\n    const dispatch = useDispatch();\n    const [Total, setTotal] = useState(0)\n    const [ShowTotal, setShowTotal] = useState(false)\n    const [ShowSuccess, setShowSuccess] = useState(false)\n\n    useEffect(() => {\n\n        let cartItems = [];\n        if (props.user.userData && props.user.userData.cart) {\n            if (props.user.userData.cart.length > 0) {\n                props.user.userData.cart.forEach(item => {\n                    cartItems.push(item.id)\n                });\n                dispatch(getCartItems(cartItems, props.user.userData.cart))\n                    .then((response) => {\n                        if (response.payload.length > 0) {\n                            calculateTotal(response.payload)\n                        }\n                    })\n            }\n        }\n\n    }, [props.user.userData])\n\n    const calculateTotal = (cartDetail) => {\n        let total = 0;\n\n        cartDetail.map(item => {\n            total += parseInt(item.price, 10) * item.quantity\n        });\n\n        setTotal(total)\n        setShowTotal(true)\n    }\n\n\n    const removeFromCart = (productId) => {\n\n        dispatch(removeCartItem(productId))\n            .then((response) => {\n                if (response.payload.cartDetail.length <= 0) {\n                    setShowTotal(false)\n                } else {\n                    calculateTotal(response.payload.cartDetail)\n                }\n            })\n    }\n\n    const transactionSuccess = (data) => {\n        dispatch(onSuccessBuy({\n            cartDetail: props.user.cartDetail,\n            paymentData: data\n        }))\n            .then(response => {\n                if (response.payload.success) {\n                    setShowSuccess(true)\n                    setShowTotal(false)\n                }\n            })\n    }\n\n    const transactionError = () => {\n        console.log('Paypal error')\n    }\n\n    const transactionCanceled = () => {\n        console.log('Transaction canceled')\n    }\n\n\n    return (\n        <div style={{ width: '85%', margin: '3rem auto' }}>\n            <h1>My Cart</h1>\n            <div>\n\n                <UserCardBlock\n                    products={props.user.cartDetail}\n                    removeItem={removeFromCart}\n                />\n\n\n                {ShowTotal ?\n                    <div style={{ marginTop: '3rem' }}>\n                        <h2>Total amount: ${Total} </h2>\n                    </div>\n                    :\n                    ShowSuccess ?\n                        <Result\n                            status=\"success\"\n                            title=\"Successfully Purchased Items\"\n                        /> :\n                        <div style={{\n                            width: '100%', display: 'flex', flexDirection: 'column',\n                            justifyContent: 'center'\n                        }}>\n                            <br />\n                            <Empty description={false} />\n                            <p>No Items In the Cart</p>\n\n                        </div>\n                }\n            </div>\n\n\n\n            {/* Paypal Button */}\n\n            {ShowTotal &&\n\n                <Paypal\n                    toPay={Total}\n                    onSuccess={transactionSuccess}\n                    transactionError={transactionError}\n                    transactionCanceled={transactionCanceled}\n                />\n\n            }\n\n\n\n        </div>\n    )\n}\n\nexport default CartPage\n"]},"metadata":{},"sourceType":"module"}