{"ast":null,"code":"import _regeneratorRuntime from\"/workspace/working-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/workspace/working-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";// Author:Waseem Mehboob\n// ID: 18072\nimport React,{useEffect}from'react';import{auth}from'../_actions/user_actions';import{useSelector,useDispatch}from\"react-redux\";export default function(ComposedClass,reload){var adminRoute=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;function AuthenticationCheck(props){var user=useSelector(function(state){return state.user;});var dispatch=useDispatch();useEffect(function(){dispatch(auth()).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return!response.payload.isAuth;case 2:if(!_context.sent){_context.next=6;break;}if(reload){props.history.push('/login');}_context.next=7;break;case 6:if(adminRoute&&!response.payload.isAdmin){props.history.push('/');}else{if(reload===false){props.history.push('/');}}case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());},[dispatch,props.history,user.googleAuth]);return/*#__PURE__*/React.createElement(ComposedClass,Object.assign({},props,{user:user}));}return AuthenticationCheck;}","map":{"version":3,"sources":["/workspace/working-react/client/src/hoc/auth.js"],"names":["React","useEffect","auth","useSelector","useDispatch","ComposedClass","reload","adminRoute","AuthenticationCheck","props","user","state","dispatch","then","response","payload","isAuth","history","push","isAdmin","googleAuth"],"mappings":"ySAAA;AACA;AACA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,0BAArB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CAEA,cAAe,UAAUC,aAAV,CAAyBC,MAAzB,CAAoD,IAAnBC,CAAAA,UAAmB,2DAAN,IAAM,CAC/D,QAASC,CAAAA,mBAAT,CAA6BC,KAA7B,CAAoC,CAEhC,GAAIC,CAAAA,IAAI,CAAGP,WAAW,CAAC,SAAAQ,KAAK,QAAIA,CAAAA,KAAK,CAACD,IAAV,EAAN,CAAtB,CACA,GAAME,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CAEAH,SAAS,CAAC,UAAM,CAEZW,QAAQ,CAACV,IAAI,EAAL,CAAR,CAAiBW,IAAjB,0FAAsB,iBAAMC,QAAN,wIACR,CAACA,QAAQ,CAACC,OAAT,CAAiBC,MADV,kDAEd,GAAIV,MAAJ,CAAY,CACRG,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,QAAnB,EACH,CAJa,6BAMd,GAAIX,UAAU,EAAI,CAACO,QAAQ,CAACC,OAAT,CAAiBI,OAApC,CAA6C,CACzCV,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,GAAnB,EACH,CAFD,IAGK,CACD,GAAIZ,MAAM,GAAK,KAAf,CAAsB,CAClBG,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,GAAnB,EACH,CACJ,CAba,sDAAtB,gEAiBH,CAnBQ,CAmBN,CAACN,QAAD,CAAWH,KAAK,CAACQ,OAAjB,CAA0BP,IAAI,CAACU,UAA/B,CAnBM,CAAT,CAqBA,mBACI,oBAAC,aAAD,kBAAmBX,KAAnB,EAA0B,IAAI,CAAEC,IAAhC,GADJ,CAGH,CACD,MAAOF,CAAAA,mBAAP,CACH","sourcesContent":["// Author:Waseem Mehboob\n// ID: 18072\nimport React, { useEffect } from 'react';\nimport { auth } from '../_actions/user_actions';\nimport { useSelector, useDispatch } from \"react-redux\";\n\nexport default function (ComposedClass, reload, adminRoute = null) {\n    function AuthenticationCheck(props) {\n\n        let user = useSelector(state => state.user);\n        const dispatch = useDispatch();\n\n        useEffect(() => {\n\n            dispatch(auth()).then(async response => {\n                if (await !response.payload.isAuth) {\n                    if (reload) {\n                        props.history.push('/login')\n                    }\n                } else {\n                    if (adminRoute && !response.payload.isAdmin) {\n                        props.history.push('/')\n                    }\n                    else {\n                        if (reload === false) {\n                            props.history.push('/')\n                        }\n                    }\n                }\n            })\n            \n        }, [dispatch, props.history, user.googleAuth])\n\n        return (\n            <ComposedClass {...props} user={user} />\n        )\n    }\n    return AuthenticationCheck\n}\n\n\n"]},"metadata":{},"sourceType":"module"}