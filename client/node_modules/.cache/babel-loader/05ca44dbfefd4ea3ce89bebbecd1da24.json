{"ast":null,"code":"import _objectSpread from\"/workspace/working-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/workspace/working-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/workspace/working-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// Author:Waseem Mehboob\n// ID: 18072\nimport React,{useState}from'react';import Dropzone from'react-dropzone';import{Icon}from'antd';import Axios from'axios';function FileUpload(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),Images=_useState2[0],setImages=_useState2[1];var onDrop=function onDrop(files){var formData=new FormData();var config={header:{'content-type':'multipart/form-data'}};formData.append(\"file\",files[0]);//save the Image we chose inside the Node Server \nAxios.post('/api/product/uploadImage',formData,config).then(function(response){if(response.data.success){setImages([].concat(_toConsumableArray(Images),[response.data.image]));props.refreshFunction([].concat(_toConsumableArray(Images),[response.data.image]));}else{alert('Failed to save the Image in Server');}});};var onDelete=function onDelete(image){var currentIndex=Images.indexOf(image);var newImages=_toConsumableArray(Images);newImages.splice(currentIndex,1);setImages(newImages);props.refreshFunction(newImages);};return/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',justifyContent:'space-between'}},/*#__PURE__*/React.createElement(Dropzone,{onDrop:onDrop,multiple:false,maxSize:800000000},function(_ref){var getRootProps=_ref.getRootProps,getInputProps=_ref.getInputProps;return/*#__PURE__*/React.createElement(\"div\",Object.assign({style:{width:'300px',height:'240px',border:'1px solid lightgray',display:'flex',alignItems:'center',justifyContent:'center'}},getRootProps()),console.log('getRootProps',_objectSpread({},getRootProps())),console.log('getInputProps',_objectSpread({},getInputProps())),/*#__PURE__*/React.createElement(\"input\",getInputProps()),/*#__PURE__*/React.createElement(Icon,{type:\"plus\",style:{fontSize:'3rem'}}));}),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',width:'350px',height:'240px',overflowX:'scroll'}},Images.map(function(image,index){return/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return onDelete(image);}},/*#__PURE__*/React.createElement(\"img\",{style:{minWidth:'300px',width:'300px',height:'240px'},src:\"\".concat(process.env.PUBLIC_URL,\"/\").concat(image),alt:\"productImg-\".concat(index)}));})));}export default FileUpload;","map":{"version":3,"sources":["/workspace/working-react/client/src/components/utils/FileUpload.js"],"names":["React","useState","Dropzone","Icon","Axios","FileUpload","props","Images","setImages","onDrop","files","formData","FormData","config","header","append","post","then","response","data","success","image","refreshFunction","alert","onDelete","currentIndex","indexOf","newImages","splice","display","justifyContent","getRootProps","getInputProps","width","height","border","alignItems","console","log","fontSize","overflowX","map","index","minWidth","process","env","PUBLIC_URL"],"mappings":"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","sourcesContent":["// Author:Waseem Mehboob\n// ID: 18072\nimport React, { useState } from 'react'\nimport Dropzone from 'react-dropzone';\nimport { Icon } from 'antd';\nimport Axios from 'axios';\nfunction FileUpload(props) {\n\n    const [Images, setImages] = useState([])\n\n    const onDrop = (files) => {\n\n        let formData = new FormData();\n        const config = {\n            header: { 'content-type': 'multipart/form-data' }\n        }\n        formData.append(\"file\", files[0])\n        //save the Image we chose inside the Node Server \n        Axios.post('/api/product/uploadImage', formData, config)\n            .then(response => {\n                if (response.data.success) {\n\n                    setImages([...Images, response.data.image])\n                    props.refreshFunction([...Images, response.data.image])\n\n                } else {\n                    alert('Failed to save the Image in Server')\n                }\n            })\n    }\n\n\n    const onDelete = (image) => {\n        const currentIndex = Images.indexOf(image);\n\n        let newImages = [...Images]\n        newImages.splice(currentIndex, 1)\n\n        setImages(newImages)\n        props.refreshFunction(newImages)\n    }\n\n    return (\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n            <Dropzone\n                onDrop={onDrop}\n                multiple={false}\n                maxSize={800000000}\n            >\n                {({ getRootProps, getInputProps }) => (\n                    <div style={{\n                        width: '300px', height: '240px', border: '1px solid lightgray',\n                        display: 'flex', alignItems: 'center', justifyContent: 'center'\n                    }}\n                        {...getRootProps()}\n                    >\n                        {console.log('getRootProps', { ...getRootProps() })}\n                        {console.log('getInputProps', { ...getInputProps() })}\n                        <input {...getInputProps()} />\n                        <Icon type=\"plus\" style={{ fontSize: '3rem' }} />\n\n                    </div>\n                )}\n            </Dropzone>\n\n            <div style={{ display: 'flex', width: '350px', height: '240px', overflowX: 'scroll' }}>\n\n                {Images.map((image, index) => (\n                    <div onClick={() => onDelete(image)}>\n                        <img style={{ minWidth: '300px', width: '300px', height: '240px' }} src={`${process.env.PUBLIC_URL}/${image}`} alt={`productImg-${index}`} />\n                            \n                    </div>\n                    \n                ))}\n\n\n            </div>\n\n        </div>\n    )\n}\n\nexport default FileUpload\n"]},"metadata":{},"sourceType":"module"}