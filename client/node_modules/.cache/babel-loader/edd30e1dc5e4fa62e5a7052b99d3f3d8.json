{"ast":null,"code":"import _objectSpread from\"/workspace/ca4webp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/workspace/ca4webp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/workspace/ca4webp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Axios from'axios';import{Icon,Col,Card,Row}from'antd';import ImageSlider from'../../utils/ImageSlider';import CheckBox from'./Sections/CheckBox';import RadioBox from'./Sections/RadioBox';import{continents,price}from'./Sections/Datas';import SearchFeature from'./Sections/SearchFeature';var Meta=Card.Meta;function LandingPage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),Products=_useState2[0],setProducts=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),Skip=_useState4[0],setSkip=_useState4[1];var _useState5=useState(8),_useState6=_slicedToArray(_useState5,2),Limit=_useState6[0],setLimit=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),PostSize=_useState8[0],setPostSize=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),SearchTerms=_useState10[0],setSearchTerms=_useState10[1];var _useState11=useState({continents:[],price:[]}),_useState12=_slicedToArray(_useState11,2),Filters=_useState12[0],setFilters=_useState12[1];useEffect(function(){var variables={skip:Skip,limit:Limit};getProducts(variables);},[]);var getProducts=function getProducts(variables){Axios.post('/api/product/getProducts',variables).then(function(response){if(response.data.success){if(variables.loadMore){setProducts([].concat(_toConsumableArray(Products),_toConsumableArray(response.data.products)));}else{setProducts(response.data.products);}setPostSize(response.data.postSize);}else{alert('Failed to fectch product datas');}});};var onLoadMore=function onLoadMore(){var skip=Skip+Limit;var variables={skip:skip,limit:Limit,loadMore:true,filters:Filters,searchTerm:SearchTerms};getProducts(variables);setSkip(skip);};var renderCards=Products.map(function(product,index){return/*#__PURE__*/React.createElement(Col,{lg:6,md:8,xs:24},/*#__PURE__*/React.createElement(Card,{hoverable:true,cover:/*#__PURE__*/React.createElement(\"a\",{href:\"/product/\".concat(product._id)},\" \",/*#__PURE__*/React.createElement(ImageSlider,{images:product.images}))},/*#__PURE__*/React.createElement(Meta,{title:product.title,description:\"$\".concat(product.price)})));});var showFilteredResults=function showFilteredResults(filters){var variables={skip:0,limit:Limit,filters:filters};getProducts(variables);setSkip(0);};var handlePrice=function handlePrice(value){var data=price;var array=[];for(var key in data){if(data[key]._id===parseInt(value,10)){array=data[key].array;}}console.log('array',array);return array;};var _handleFilters=function handleFilters(filters,category){var newFilters=_objectSpread({},Filters);newFilters[category]=filters;if(category===\"price\"){var priceValues=handlePrice(filters);newFilters[category]=priceValues;}console.log(newFilters);showFilteredResults(newFilters);setFilters(newFilters);};var updateSearchTerms=function updateSearchTerms(newSearchTerm){var variables={skip:0,limit:Limit,filters:Filters,searchTerm:newSearchTerm};setSkip(0);setSearchTerms(newSearchTerm);getProducts(variables);};return/*#__PURE__*/React.createElement(\"div\",{style:{width:'75%',margin:'3rem auto'}},/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'center'}},/*#__PURE__*/React.createElement(\"h2\",null,\"  Let's Travel Anywhere  \",/*#__PURE__*/React.createElement(Icon,{type:\"rocket\"}),\"  \")),/*#__PURE__*/React.createElement(Row,{gutter:[16,16]},/*#__PURE__*/React.createElement(Col,{lg:12,xs:24},/*#__PURE__*/React.createElement(CheckBox,{list:continents,handleFilters:function handleFilters(filters){return _handleFilters(filters,\"continents\");}})),/*#__PURE__*/React.createElement(Col,{lg:12,xs:24},/*#__PURE__*/React.createElement(RadioBox,{list:price,handleFilters:function handleFilters(filters){return _handleFilters(filters,\"price\");}}))),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',justifyContent:'flex-end',margin:'1rem auto'}},/*#__PURE__*/React.createElement(SearchFeature,{refreshFunction:updateSearchTerms})),Products.length===0?/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',height:'300px',justifyContent:'center',alignItems:'center'}},/*#__PURE__*/React.createElement(\"h2\",null,\"No post yet...\")):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Row,{gutter:[16,16]},renderCards)),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),PostSize>=Limit&&/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',justifyContent:'center'}},/*#__PURE__*/React.createElement(\"button\",{onClick:onLoadMore},\"Load More\")));}export default LandingPage;","map":{"version":3,"sources":["/workspace/ca4webp/client/src/components/views/LandingPage/LandingPage.js"],"names":["React","useEffect","useState","Axios","Icon","Col","Card","Row","ImageSlider","CheckBox","RadioBox","continents","price","SearchFeature","Meta","LandingPage","Products","setProducts","Skip","setSkip","Limit","setLimit","PostSize","setPostSize","SearchTerms","setSearchTerms","Filters","setFilters","variables","skip","limit","getProducts","post","then","response","data","success","loadMore","products","postSize","alert","onLoadMore","filters","searchTerm","renderCards","map","product","index","_id","images","title","showFilteredResults","handlePrice","value","array","key","parseInt","console","log","handleFilters","category","newFilters","priceValues","updateSearchTerms","newSearchTerm","width","margin","textAlign","display","justifyContent","length","height","alignItems"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Axios from 'axios';\nimport { Icon, Col, Card, Row } from 'antd';\nimport ImageSlider from '../../utils/ImageSlider';\nimport CheckBox from './Sections/CheckBox';\nimport RadioBox from './Sections/RadioBox';\nimport { continents, price } from './Sections/Datas';\nimport SearchFeature from './Sections/SearchFeature';\n\nconst { Meta } = Card;\n\nfunction LandingPage() {\n\n    const [Products, setProducts] = useState([])\n    const [Skip, setSkip] = useState(0)\n    const [Limit, setLimit] = useState(8)\n    const [PostSize, setPostSize] = useState()\n    const [SearchTerms, setSearchTerms] = useState(\"\")\n\n    const [Filters, setFilters] = useState({\n        continents: [],\n        price: []\n    })\n\n    useEffect(() => {\n\n        const variables = {\n            skip: Skip,\n            limit: Limit,\n        }\n\n        getProducts(variables)\n\n    }, [])\n\n    const getProducts = (variables) => {\n        Axios.post('/api/product/getProducts', variables)\n            .then(response => {\n                if (response.data.success) {\n                    if (variables.loadMore) {\n                        setProducts([...Products, ...response.data.products])\n                    } else {\n                        setProducts(response.data.products)\n                    }\n                    setPostSize(response.data.postSize)\n                } else {\n                    alert('Failed to fectch product datas')\n                }\n            })\n    }\n\n    const onLoadMore = () => {\n        let skip = Skip + Limit;\n\n        const variables = {\n            skip: skip,\n            limit: Limit,\n            loadMore: true,\n            filters: Filters,\n            searchTerm: SearchTerms\n        }\n        getProducts(variables)\n        setSkip(skip)\n    }\n\n\n    const renderCards = Products.map((product, index) => {\n\n        return <Col lg={6} md={8} xs={24}>\n            <Card\n                hoverable={true}\n                cover={<a href={`/product/${product._id}`} > <ImageSlider images={product.images} /></a>}\n            >\n                <Meta\n                    title={product.title}\n                    description={`$${product.price}`}\n                />\n            </Card>\n        </Col>\n    })\n\n\n    const showFilteredResults = (filters) => {\n\n        const variables = {\n            skip: 0,\n            limit: Limit,\n            filters: filters\n\n        }\n        getProducts(variables)\n        setSkip(0)\n\n    }\n\n    const handlePrice = (value) => {\n        const data = price;\n        let array = [];\n\n        for (let key in data) {\n\n            if (data[key]._id === parseInt(value, 10)) {\n                array = data[key].array;\n            }\n        }\n        console.log('array', array)\n        return array\n    }\n\n    const handleFilters = (filters, category) => {\n\n        const newFilters = { ...Filters }\n\n        newFilters[category] = filters\n\n        if (category === \"price\") {\n            let priceValues = handlePrice(filters)\n            newFilters[category] = priceValues\n\n        }\n\n        console.log(newFilters)\n\n        showFilteredResults(newFilters)\n        setFilters(newFilters)\n    }\n\n    const updateSearchTerms = (newSearchTerm) => {\n\n        const variables = {\n            skip: 0,\n            limit: Limit,\n            filters: Filters,\n            searchTerm: newSearchTerm\n        }\n\n        setSkip(0)\n        setSearchTerms(newSearchTerm)\n\n        getProducts(variables)\n    }\n\n\n    return (\n        <div style={{ width: '75%', margin: '3rem auto' }}>\n            <div style={{ textAlign: 'center' }}>\n                <h2>  Let's Travel Anywhere  <Icon type=\"rocket\" />  </h2>\n            </div>\n\n\n            {/* Filter  */}\n\n            <Row gutter={[16, 16]}>\n                <Col lg={12} xs={24} >\n                    <CheckBox\n                        list={continents}\n                        handleFilters={filters => handleFilters(filters, \"continents\")}\n                    />\n                </Col>\n                <Col lg={12} xs={24}>\n                    <RadioBox\n                        list={price}\n                        handleFilters={filters => handleFilters(filters, \"price\")}\n                    />\n                </Col>\n            </Row>\n\n\n            {/* Search  */}\n            <div style={{ display: 'flex', justifyContent: 'flex-end', margin: '1rem auto' }}>\n\n                <SearchFeature\n                    refreshFunction={updateSearchTerms}\n                />\n\n            </div>\n\n\n            {Products.length === 0 ?\n                <div style={{ display: 'flex', height: '300px', justifyContent: 'center', alignItems: 'center' }}>\n                    <h2>No post yet...</h2>\n                </div> :\n                <div>\n                    <Row gutter={[16, 16]}>\n\n                        {renderCards}\n\n                    </Row>\n\n\n                </div>\n            }\n            <br /><br />\n\n            {PostSize >= Limit &&\n                <div style={{ display: 'flex', justifyContent: 'center' }}>\n                    <button onClick={onLoadMore}>Load More</button>\n                </div>\n            }\n\n\n        </div>\n    )\n}\n\nexport default LandingPage\n"]},"metadata":{},"sourceType":"module"}